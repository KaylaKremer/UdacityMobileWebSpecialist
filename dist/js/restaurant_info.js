"use strict";var restaurant=void 0,map=void 0,liveMap=!1,initLoad=!0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e,t):fillBreadcrumb()})};var fetchRestaurantFromURL=function(a){if(self.restaurant)a(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),a(null,t)):console.error(e)}):(error="No restaurant id in URL",a(error,null))}},getLiveMap=function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;if(!liveMap){var e=document.getElementById("static-map-img");e.parentNode.removeChild(e),self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:self.restaurant.latlng,scrollwheel:!1}),addMarkerToMap(),liveMap=!0}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;if(initLoad){var t=DBHelper.staticImageForMapRestaurantInfo(self.restaurant),a=document.getElementById("map"),n=document.createElement("img");n.id="static-map-img",n.alt="Static Google Maps image",n.style.width=a.clientWidth+"px",n.style.height=a.clientHeight+"px",n.src=t,n.addEventListener("click",function(){getLiveMap(self.restaurant)}),a.appendChild(n),initLoad=!1}else addMarkerToMap();document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var r=document.getElementById("restaurant-img");r.className="restaurant-img lazyload",r.setAttribute("data-src",DBHelper.smallImageUrlForRestaurant(e)+" 400w"),r.setAttribute("data-srcset",DBHelper.smallImageUrlForRestaurant(e)+" 400w, "+DBHelper.largeImageUrlForRestaurant(e)+" 800w"),r.setAttribute("data-sizes","auto"),r.title=""+e.name,r.alt=e.name+" in "+e.neighborhood+" - "+e.cuisine_type+" restaurant",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var a in e){var n=document.createElement("tr"),r=document.createElement("td");r.innerHTML=a,n.appendChild(r);var i=document.createElement("td");i.innerHTML=e[a],n.appendChild(i),t.appendChild(n)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),a=document.createElement("h2");if(a.innerHTML="Reviews",t.appendChild(a),!e){var n=document.createElement("p");return n.innerHTML="No reviews yet!",void t.appendChild(n)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)},createReviewHTML=function(e){var t=document.createElement("li"),a=document.createElement("p");a.innerHTML=e.name,t.appendChild(a);var n=document.createElement("p");n.innerHTML=e.date,t.appendChild(n);var r=document.createElement("p");r.innerHTML="Rating: "+e.rating,t.appendChild(r);var i=document.createElement("p");return i.innerHTML=e.comments,t.appendChild(i),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),a=document.createElement("li");a.innerHTML=e.name,a.setAttribute("aria-label",e.name),a.setAttribute("aria-describedby","breadcrumb-description"),a.setAttribute("tabindex","0"),a.title=e.name,t.appendChild(a)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},addMarkerToMap=function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;var e=DBHelper.mapMarkerForRestaurant(self.restaurant,self.map);google.maps.event.addListener(e,"click",function(){window.location.href=e.url})};