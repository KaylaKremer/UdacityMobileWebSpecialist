'use strict';

var restaurants = void 0,
    neighborhoods = void 0,
    cuisines = void 0;
var map = void 0;
var liveMap = false;
var initLoad = true;
var markers = [];

/**
 * Fetch neighborhoods and cuisines as soon as the page is loaded.
 */
document.addEventListener('DOMContentLoaded', function (event) {
	fetchNeighborhoods();
	fetchCuisines();
});

/**
 * Fetch all neighborhoods and set their HTML.
 */
var fetchNeighborhoods = function fetchNeighborhoods() {
	DBHelper.fetchNeighborhoods(function (error, neighborhoods) {
		if (error) {
			// Got an error
			console.error(error);
		} else {
			self.neighborhoods = neighborhoods;
			fillNeighborhoodsHTML();
		}
	});
};

/**
 * Set neighborhoods HTML.
 */
var fillNeighborhoodsHTML = function fillNeighborhoodsHTML() {
	var neighborhoods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.neighborhoods;

	var select = document.getElementById('neighborhoods-select');
	neighborhoods.forEach(function (neighborhood) {
		var option = document.createElement('option');
		option.innerHTML = neighborhood;
		option.value = neighborhood;
		select.append(option);
	});
};

/**
 * Fetch all cuisines and set their HTML.
 */
var fetchCuisines = function fetchCuisines() {
	DBHelper.fetchCuisines(function (error, cuisines) {
		if (error) {
			// Got an error!
			console.error(error);
		} else {
			self.cuisines = cuisines;
			fillCuisinesHTML();
		}
	});
};

/**
 * Set cuisines HTML.
 */
var fillCuisinesHTML = function fillCuisinesHTML() {
	var cuisines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.cuisines;

	var select = document.getElementById('cuisines-select');

	cuisines.forEach(function (cuisine) {
		var option = document.createElement('option');
		option.innerHTML = cuisine;
		option.value = cuisine;
		select.append(option);
	});
};

/**
 * Initialize Google map, called from HTML.
 */
window.initMap = function () {
	updateRestaurants();
};

/**
 * Update page and map for current restaurants.
 */
var updateRestaurants = function updateRestaurants() {
	var cSelect = document.getElementById('cuisines-select');
	var nSelect = document.getElementById('neighborhoods-select');

	var cIndex = cSelect.selectedIndex;
	var nIndex = nSelect.selectedIndex;

	var cuisine = cSelect[cIndex].value;
	var neighborhood = nSelect[nIndex].value;

	DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, function (error, restaurants) {
		if (error) {
			// Got an error!
			console.error(error);
		} else {
			resetRestaurants(restaurants);
			fillRestaurantsHTML();
		}
	});
};

/**
 * Clear current restaurants, their HTML and remove their map markers.
 */
var resetRestaurants = function resetRestaurants(restaurants) {
	// Remove all restaurants
	self.restaurants = [];
	var ul = document.getElementById('restaurants-list');
	ul.innerHTML = '';

	// Remove all map markers
	self.markers.forEach(function (m) {
		return m.setMap(null);
	});
	self.markers = [];
	self.restaurants = restaurants;
};

/**
 * Create all restaurants HTML and add them to the webpage.
 */

/* If a live map isn't already enabled, removes the static map image and replaces it with a live Google Map. */
var getLiveMap = function getLiveMap() {
	updateRestaurants();
	if (liveMap) {
		return;
	} else {
		var staticMapImg = document.getElementById('static-map-img');
		staticMapImg.parentNode.removeChild(staticMapImg);
		var loc = {
			lat: 40.722216,
			lng: -73.987501
		};
		self.map = new google.maps.Map(document.getElementById('map'), {
			zoom: 12,
			center: loc,
			scrollwheel: false
		});
		liveMap = true;
	}
};

var fillRestaurantsHTML = function fillRestaurantsHTML() {
	var restaurants = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurants;

	var ul = document.getElementById('restaurants-list');
	restaurants.forEach(function (restaurant) {
		ul.append(createRestaurantHTML(restaurant));
	});

	/* Loads a static map image if it's the initial page load. Adds a click event listener so that when the user clicks on the map, it removes the static map image and loads a live map in its place. */
	if (initLoad) {
		fetchNeighborhoods();
		fetchCuisines();
		var staticMap = DBHelper.staticImageForMapIndex(self.restaurants);
		var _map = document.getElementById('map');
		var staticMapImg = document.createElement('img');
		staticMapImg.id = 'static-map-img';
		staticMapImg.style.width = _map.clientWidth + 'px';
		staticMapImg.style.height = _map.clientHeight + 'px';
		staticMapImg.src = staticMap;
		staticMapImg.addEventListener('click', function () {
			getLiveMap();
		});
		_map.appendChild(staticMapImg);
		initLoad = false;
	} else {
		addMarkersToMap();
	}
};

/**
 * Create restaurant HTML.
 */
var createRestaurantHTML = function createRestaurantHTML(restaurant) {
	/* Lazy loads small or large version of restaurant image based on data-srcset and auto data-sizes. Also dynamically sets alt and title text of the image. */
	var li = document.createElement('li');
	var image = document.createElement('img');
	image.className = 'restaurant-img lazyload';

	/* Backup code without lazy load
 image.src = DBHelper.smallImageUrlForRestaurant(restaurant);
 image.srcset = `${DBHelper.smallImageUrlForRestaurant(restaurant)} 400w, ${DBHelper.largeImageUrlForRestaurant(restaurant)} 800w`;
 image.sizes = '50vw'; */
	image.setAttribute('data-src', DBHelper.smallImageUrlForRestaurant(restaurant) + ' 400w');
	image.setAttribute('data-srcset', DBHelper.smallImageUrlForRestaurant(restaurant) + ' 400w, ' + DBHelper.largeImageUrlForRestaurant(restaurant) + ' 800w');
	image.setAttribute('data-sizes', 'auto');
	image.title = '' + restaurant.name;
	image.alt = restaurant.name + ' in ' + restaurant.neighborhood + ' - ' + restaurant.cuisine_type + ' restaurant';
	li.append(image);

	var name = document.createElement('h3');
	name.innerHTML = restaurant.name;
	li.append(name);

	var neighborhood = document.createElement('p');
	neighborhood.innerHTML = restaurant.neighborhood;
	li.append(neighborhood);

	var address = document.createElement('p');
	address.innerHTML = restaurant.address;
	li.append(address);

	//Create empty element so flex grow can be applied and create space to vertically align View Details buttons.
	var empty = document.createElement('p');
	empty.className = 'restaurant-empty';
	li.append(empty);

	var more = document.createElement('a');
	more.innerHTML = 'View Restaurant Details';
	more.href = DBHelper.urlForRestaurant(restaurant);

	//Dynamically set title attribute
	more.title = restaurant.name + ' - View Restaurant Details';

	//Set ARIA attributes to each restaurant link
	more.setAttribute('role', 'button');
	more.setAttribute('tabindex', '0');
	more.setAttribute('aria-label', 'View' + restaurant.name + 'Restaurant Details');
	li.append(more);

	return li;
};

/**
 * Add markers for current restaurants to the map.
 */
var addMarkersToMap = function addMarkersToMap() {
	var restaurants = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : self.restaurants;

	restaurants.forEach(function (restaurant) {
		// Add marker to the map
		var marker = DBHelper.mapMarkerForRestaurant(restaurant, self.map);
		google.maps.event.addListener(marker, 'click', function () {
			window.location.href = marker.url;
		});
		self.markers.push(marker);
	});
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXAiLCJsaXZlTWFwIiwiaW5pdExvYWQiLCJtYXJrZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJmZXRjaEN1aXNpbmVzIiwiREJIZWxwZXIiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwic2VsZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsIm5laWdoYm9yaG9vZCIsInZhbHVlIiwiYXBwZW5kIiwiZmlsbEN1aXNpbmVzSFRNTCIsImN1aXNpbmUiLCJ3aW5kb3ciLCJpbml0TWFwIiwidXBkYXRlUmVzdGF1cmFudHMiLCJjU2VsZWN0IiwiblNlbGVjdCIsImNJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJuSW5kZXgiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QiLCJyZXNldFJlc3RhdXJhbnRzIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsInVsIiwibSIsInNldE1hcCIsImdldExpdmVNYXAiLCJzdGF0aWNNYXBJbWciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJsb2MiLCJsYXQiLCJsbmciLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJyZXN0YXVyYW50Iiwic3RhdGljTWFwIiwic3RhdGljSW1hZ2VGb3JNYXBJbmRleCIsImlkIiwic3R5bGUiLCJ3aWR0aCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJhZGRNYXJrZXJzVG9NYXAiLCJsaSIsImltYWdlIiwiY2xhc3NOYW1lIiwic2V0QXR0cmlidXRlIiwic21hbGxJbWFnZVVybEZvclJlc3RhdXJhbnQiLCJsYXJnZUltYWdlVXJsRm9yUmVzdGF1cmFudCIsInRpdGxlIiwibmFtZSIsImFsdCIsImN1aXNpbmVfdHlwZSIsImFkZHJlc3MiLCJlbXB0eSIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsIm1hcmtlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJhZGRMaXN0ZW5lciIsImxvY2F0aW9uIiwidXJsIiwicHVzaCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxvQkFBSjtBQUFBLElBQ0NDLHNCQUREO0FBQUEsSUFFQ0MsaUJBRkQ7QUFHQSxJQUFJQyxZQUFKO0FBQ0EsSUFBSUMsVUFBVSxLQUFkO0FBQ0EsSUFBSUMsV0FBVyxJQUFmO0FBQ0EsSUFBSUMsVUFBVSxFQUFkOztBQUVBOzs7QUFHQUMsU0FBU0MsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFVBQUNDLEtBQUQsRUFBVztBQUN4REM7QUFDQUM7QUFDQSxDQUhEOztBQUtBOzs7QUFHQSxJQUFNRCxxQkFBcUIsU0FBckJBLGtCQUFxQixHQUFNO0FBQ2hDRSxVQUFTRixrQkFBVCxDQUE0QixVQUFDRyxLQUFELEVBQVFaLGFBQVIsRUFBMEI7QUFDckQsTUFBSVksS0FBSixFQUFXO0FBQ1Y7QUFDQUMsV0FBUUQsS0FBUixDQUFjQSxLQUFkO0FBQ0EsR0FIRCxNQUdPO0FBQ05FLFFBQUtkLGFBQUwsR0FBcUJBLGFBQXJCO0FBQ0FlO0FBQ0E7QUFDRCxFQVJEO0FBU0EsQ0FWRDs7QUFZQTs7O0FBR0EsSUFBTUEsd0JBQXdCLFNBQXhCQSxxQkFBd0IsR0FBd0M7QUFBQSxLQUF2Q2YsYUFBdUMsdUVBQXZCYyxLQUFLZCxhQUFrQjs7QUFDckUsS0FBTWdCLFNBQVNWLFNBQVNXLGNBQVQsQ0FBd0Isc0JBQXhCLENBQWY7QUFDQWpCLGVBQWNrQixPQUFkLENBQXNCLHdCQUFnQjtBQUNyQyxNQUFNQyxTQUFTYixTQUFTYyxhQUFULENBQXVCLFFBQXZC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QSxFQVBEO0FBUUEsQ0FURCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnRzLFxuXHRuZWlnaGJvcmhvb2RzLFxuXHRjdWlzaW5lcztcbmxldCBtYXA7XG5sZXQgbGl2ZU1hcCA9IGZhbHNlO1xubGV0IGluaXRMb2FkID0gdHJ1ZTtcbmxldCBtYXJrZXJzID0gW107XG5cbi8qKlxuICogRmV0Y2ggbmVpZ2hib3Job29kcyBhbmQgY3Vpc2luZXMgYXMgc29vbiBhcyB0aGUgcGFnZSBpcyBsb2FkZWQuXG4gKi9cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcblx0ZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XG5cdGZldGNoQ3Vpc2luZXMoKTtcbn0pO1xuXG4vKipcbiAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cbiAqL1xuY29uc3QgZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xuXHREQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XG5cdFx0aWYgKGVycm9yKSB7IFxuXHRcdFx0Ly8gR290IGFuIGVycm9yXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcblx0XHRcdGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKipcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXG4gKi9cbmNvbnN0IGZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XG5cdGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xuXHRuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcblx0XHRjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcblx0XHRvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xuXHRcdG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcblx0XHRzZWxlY3QuYXBwZW5kKG9wdGlvbik7XG5cdH0pO1xufTtcblxuLyoqXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxuICovXG5jb25zdCBmZXRjaEN1aXNpbmVzID0gKCkgPT4ge1xuXHREQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcblx0XHRpZiAoZXJyb3IpIHsgXG5cdFx0XHQvLyBHb3QgYW4gZXJyb3IhXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xuXHRcdFx0ZmlsbEN1aXNpbmVzSFRNTCgpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKipcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxuICovXG5jb25zdCBmaWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xuXHRjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XG5cblx0Y3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcblx0XHRjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcblx0XHRvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcblx0XHRvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xuXHRcdHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcblx0fSk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG5cdHVwZGF0ZVJlc3RhdXJhbnRzKCk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXG4gKi9cbmNvbnN0IHVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xuXHRjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xuXHRjb25zdCBuU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XG5cblx0Y29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xuXHRjb25zdCBuSW5kZXggPSBuU2VsZWN0LnNlbGVjdGVkSW5kZXg7XG5cblx0Y29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcblx0Y29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xuXG5cdERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcblx0XHRpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHMpO1xuXHRcdFx0ZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKipcbiAqIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIHRoZWlyIEhUTUwgYW5kIHJlbW92ZSB0aGVpciBtYXAgbWFya2Vycy5cbiAqL1xuY29uc3QgcmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xuXHQvLyBSZW1vdmUgYWxsIHJlc3RhdXJhbnRzXG5cdHNlbGYucmVzdGF1cmFudHMgPSBbXTtcblx0Y29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xuXHR1bC5pbm5lckhUTUwgPSAnJztcblxuXHQvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXG5cdHNlbGYubWFya2Vycy5mb3JFYWNoKG0gPT4gbS5zZXRNYXAobnVsbCkpO1xuXHRzZWxmLm1hcmtlcnMgPSBbXTtcblx0c2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJlc3RhdXJhbnRzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxuICovXG5cbi8qIElmIGEgbGl2ZSBtYXAgaXNuJ3QgYWxyZWFkeSBlbmFibGVkLCByZW1vdmVzIHRoZSBzdGF0aWMgbWFwIGltYWdlIGFuZCByZXBsYWNlcyBpdCB3aXRoIGEgbGl2ZSBHb29nbGUgTWFwLiAqL1xuY29uc3QgZ2V0TGl2ZU1hcCA9ICgpID0+IHtcblx0dXBkYXRlUmVzdGF1cmFudHMoKTtcblx0aWYobGl2ZU1hcCl7XG5cdFx0cmV0dXJuO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IHN0YXRpY01hcEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0aWMtbWFwLWltZycpO1xuXHRcdHN0YXRpY01hcEltZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0YXRpY01hcEltZyk7XG5cdFx0bGV0IGxvYyA9IHtcblx0XHRcdGxhdDogNDAuNzIyMjE2LFxuXHRcdFx0bG5nOiAtNzMuOTg3NTAxXG5cdFx0fTtcblx0XHRzZWxmLm1hcCA9IG5ldyBnb29nbGVcblx0XHRcdC5tYXBzXG5cdFx0XHQuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuXHRcdFx0XHR6b29tOiAxMixcblx0XHRcdFx0Y2VudGVyOiBsb2MsXG5cdFx0XHRcdHNjcm9sbHdoZWVsOiBmYWxzZVxuXHRcdFx0fSk7XG5cdFx0bGl2ZU1hcCA9IHRydWU7XG5cdH1cbn07XG5cbmNvbnN0IGZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XG5cdGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcblx0cmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcblx0XHR1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xuXHR9KTtcblx0XG5cdC8qIExvYWRzIGEgc3RhdGljIG1hcCBpbWFnZSBpZiBpdCdzIHRoZSBpbml0aWFsIHBhZ2UgbG9hZC4gQWRkcyBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHNvIHRoYXQgd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIG1hcCwgaXQgcmVtb3ZlcyB0aGUgc3RhdGljIG1hcCBpbWFnZSBhbmQgbG9hZHMgYSBsaXZlIG1hcCBpbiBpdHMgcGxhY2UuICovXG5cdGlmIChpbml0TG9hZCl7XG5cdFx0ZmV0Y2hOZWlnaGJvcmhvb2RzKCk7XG5cdFx0ZmV0Y2hDdWlzaW5lcygpO1xuXHRcdGNvbnN0IHN0YXRpY01hcCA9IERCSGVscGVyLnN0YXRpY0ltYWdlRm9yTWFwSW5kZXgoc2VsZi5yZXN0YXVyYW50cyk7XG5cdFx0Y29uc3QgbWFwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpO1xuXHRcdGNvbnN0IHN0YXRpY01hcEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdHN0YXRpY01hcEltZy5pZCA9ICgnc3RhdGljLW1hcC1pbWcnKTtcblx0XHRzdGF0aWNNYXBJbWcuc3R5bGUud2lkdGggPSBgJHttYXAuY2xpZW50V2lkdGh9cHhgO1xuXHRcdHN0YXRpY01hcEltZy5zdHlsZS5oZWlnaHQgPSBgJHttYXAuY2xpZW50SGVpZ2h0fXB4YDtcblx0XHRzdGF0aWNNYXBJbWcuc3JjID0gc3RhdGljTWFwO1xuXHRcdHN0YXRpY01hcEltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdGdldExpdmVNYXAoKTtcblx0XHR9KTtcblx0XHRtYXAuYXBwZW5kQ2hpbGQoc3RhdGljTWFwSW1nKTtcblx0XHRpbml0TG9hZCA9IGZhbHNlO1xuXHR9IGVsc2Uge1xuXHRcdGFkZE1hcmtlcnNUb01hcCgpO1xuXHR9XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwuXG4gKi9cbmNvbnN0IGNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQpID0+IHtcblx0LyogTGF6eSBsb2FkcyBzbWFsbCBvciBsYXJnZSB2ZXJzaW9uIG9mIHJlc3RhdXJhbnQgaW1hZ2UgYmFzZWQgb24gZGF0YS1zcmNzZXQgYW5kIGF1dG8gZGF0YS1zaXplcy4gQWxzbyBkeW5hbWljYWxseSBzZXRzIGFsdCBhbmQgdGl0bGUgdGV4dCBvZiB0aGUgaW1hZ2UuICovXG5cdGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsgXG5cdGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyBsYXp5bG9hZCc7XG5cblx0LyogQmFja3VwIGNvZGUgd2l0aG91dCBsYXp5IGxvYWRcblx0aW1hZ2Uuc3JjID0gREJIZWxwZXIuc21hbGxJbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG5cdGltYWdlLnNyY3NldCA9IGAke0RCSGVscGVyLnNtYWxsSW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpfSA0MDB3LCAke0RCSGVscGVyLmxhcmdlSW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpfSA4MDB3YDtcblx0aW1hZ2Uuc2l6ZXMgPSAnNTB2dyc7ICovXG5cdGltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1zcmMnLCBgJHtEQkhlbHBlci5zbWFsbEltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KX0gNDAwd2ApO1xuXHRpbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3Jjc2V0JyxgJHtEQkhlbHBlci5zbWFsbEltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KX0gNDAwdywgJHtEQkhlbHBlci5sYXJnZUltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KX0gODAwd2ApO1xuXHRpbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2l6ZXMnLCAnYXV0bycpO1xuXHRpbWFnZS50aXRsZSA9IGAke3Jlc3RhdXJhbnQubmFtZX1gO1xuXHRpbWFnZS5hbHQgPSBgJHtyZXN0YXVyYW50Lm5hbWV9IGluICR7cmVzdGF1cmFudC5uZWlnaGJvcmhvb2R9IC0gJHtyZXN0YXVyYW50LmN1aXNpbmVfdHlwZX0gcmVzdGF1cmFudGA7XG5cdGxpLmFwcGVuZChpbWFnZSk7XG5cblx0Y29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG5cdG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXHRsaS5hcHBlbmQobmFtZSk7XG5cblx0Y29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXHRuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XG5cdGxpLmFwcGVuZChuZWlnaGJvcmhvb2QpO1xuXG5cdGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cdGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xuXHRsaS5hcHBlbmQoYWRkcmVzcyk7XG5cblx0Ly9DcmVhdGUgZW1wdHkgZWxlbWVudCBzbyBmbGV4IGdyb3cgY2FuIGJlIGFwcGxpZWQgYW5kIGNyZWF0ZSBzcGFjZSB0byB2ZXJ0aWNhbGx5IGFsaWduIFZpZXcgRGV0YWlscyBidXR0b25zLlxuXHRjb25zdCBlbXB0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0ZW1wdHkuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtZW1wdHknO1xuXHRsaS5hcHBlbmQoZW1wdHkpO1xuXG5cdGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgUmVzdGF1cmFudCBEZXRhaWxzJztcblx0bW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcblxuXHQvL0R5bmFtaWNhbGx5IHNldCB0aXRsZSBhdHRyaWJ1dGVcblx0bW9yZS50aXRsZSA9IGAke3Jlc3RhdXJhbnQubmFtZX0gLSBWaWV3IFJlc3RhdXJhbnQgRGV0YWlsc2A7XG5cblx0Ly9TZXQgQVJJQSBhdHRyaWJ1dGVzIHRvIGVhY2ggcmVzdGF1cmFudCBsaW5rXG5cdG1vcmUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuXHRtb3JlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuXHRtb3JlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaWV3JyArIHJlc3RhdXJhbnQubmFtZSArICdSZXN0YXVyYW50IERldGFpbHMnKTtcblx0bGkuYXBwZW5kKG1vcmUpO1xuXG5cdHJldHVybiBsaTtcbn07XG5cbi8qKlxuICogQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcC5cbiAqL1xuY29uc3QgYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xuXHRyZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xuXHRcdC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxuXHRcdGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xuXHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsO1xuXHRcdH0pO1xuXHRcdHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcik7XG5cdH0pO1xufTtcbiJdfQ==
